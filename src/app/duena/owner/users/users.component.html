<div class="users-container" [class.embedded]="embedded">
	@if (!embedded) {
		<app-sidebar
			[menuItems]="sidebarItems"
			[currentUser]="currentUser"
			[cartCount]="cartCount">
		</app-sidebar>
	}

	<div class="users-content">
		<app-page-header
			title="Usuarios"
			japaneseName="ユーザー"
			subtitle="Gestión de empleados y sus roles"
			[action]="headerAction"
			(actionClick)="openUserForm()">
		</app-page-header>

		<div class="roles-stats">
			@for (role of roleStats; track role.id) {
				<div class="role-card" [class]="'role-' + role.id">
					<div class="role-icon" [innerHTML]="role.icon"></div>
					<div class="role-value">{{ role.count }}</div>
					<div class="role-label">{{ role.label }}</div>
				</div>
			}
		</div>

		<div class="users-grid">
			@if (users.length > 0) {
				@for (user of users; track user.id) {
					<app-user-card
						[name]="user.name"
						[email]="user.email"
						[roleLabel]="getRoleLabel(user.roleId)"
						[roleId]="user.roleId"
						[initials]="user.initials"
						[status]="user.status"
						(edit)="openUserForm(user)"
						(delete)="deleteUser(user.id)">
					</app-user-card>
				}
			} @else {
				<app-empty-state
					icon="user"
					title="No hay usuarios"
					description="Agrega el primer usuario del sistema">
				</app-empty-state>
			}
		</div>
	</div>
</div>
<!-- User Form Modal -->
<app-user-form
	[isOpen]="showUserFormModal"
	[user]="userBeingEdited"
	[roleOptions]="roleStats"
	(close)="closeUserForm()"
	(save)="saveUser($event)">
</app-user-form>
