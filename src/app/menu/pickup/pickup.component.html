<div class="pickup-container">
	<app-sidebar
		[menuItems]="sidebarItems"
		[currentUser]="currentUser"
		[cartCount]="cartCount">
	</app-sidebar>

	<div class="pickup-content">
		<app-page-header
			title="Recogida en Local"
			japaneseName="持ち帰り"
			subtitle="Gestión de pedidos para llevar"
			[action]="headerAction"
			(actionClick)="onHeaderActionClick()">
		</app-page-header>

		<app-stats-grid [stats]="pickupStats"></app-stats-grid>

		<div class="pickup-filters">
			<app-filter-chips
				label="Estado"
				[options]="statusOptions"
				[selectedId]="selectedStatus"
				(optionSelected)="onStatusFilterChange($event)">
			</app-filter-chips>
		</div>

		<div class="orders-grid">
			@if (getFilteredOrders().length > 0) {
				@for (order of getFilteredOrders(); track order.id) {
					<app-kitchen-order
						[id]="order.id"
						[tableNumber]="order.tableNumber"
						[tableName]="order.tableName"
						[items]="order.items"
						[status]="order.status"
						[startTime]="order.startTime"
						[notes]="order.notes"
						(statusChange)="onOrderStatusChange(order.id, $event)">
					</app-kitchen-order>
				}
			} @else {
				<div class="empty-state">
					<svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17 8.5L15.5 7L12 10.5L8.5 7L7 8.5L10.5 12L7 15.5L8.5 17L12 13.5L15.5 17L17 15.5L13.5 12L17 8.5Z" fill="currentColor"/>
					</svg>
					<h3>No hay pedidos de recogida</h3>
					<p>No hay pedidos pendientes para llevar en este momento</p>
				</div>
			}
		</div>

		<div class="pickup-legend">
			<div class="legend-title">Estados de Pedidos:</div>
			<div class="legend-items">
				<div class="legend-item pendiente">
					<span class="legend-dot"></span>
					<span class="legend-text">Pendiente</span>
				</div>
				<div class="legend-item preparando">
					<span class="legend-dot"></span>
					<span class="legend-text">Preparando</span>
				</div>
				<div class="legend-item listo">
					<span class="legend-dot"></span>
					<span class="legend-text">Listo para Recoger</span>
				</div>
				<div class="legend-item urgente">
					<span class="legend-dot"></span>
					<span class="legend-text">+15 min (Notificar)</span>
				</div>
			</div>
		</div>

		<div class="pickup-info">
			<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z" fill="currentColor"/>
			</svg>
			<span>Los pedidos listos se notificarán automáticamente a los clientes por SMS/WhatsApp</span>
		</div>
	</div>
</div>
